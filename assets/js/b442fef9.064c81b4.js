"use strict";(self.webpackChunkdoks=self.webpackChunkdoks||[]).push([[8110],{3029:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>h,default:()=>g,frontMatter:()=>d,metadata:()=>c,toc:()=>p});var a=n(85893),i=n(11151),r=n(67294),o=n(10748);const s=e=>{let{src:t,autoPlay:i=!0,speed:o=1.5,...s}=e;const l=(0,r.useRef)(null),[d,h]=(0,r.useState)();return(0,r.useEffect)((()=>{n.e(3911).then(n.bind(n,53911)).then((e=>{h(e)}))}),[]),(0,r.useEffect)((()=>{const e=l.current;console.log(t);const n=d?.create(t,e,{autoPlay:i,speed:o,...s});return()=>{n?.dispose()}}),[t,d,s]),(0,a.jsxs)("div",{className:"coding inverse-toggle px-1 py-1 shadow-lg text-gray-100 text-sm  bg-[#121314] rounded-lg leading-normal overflow-hidden",children:[(0,a.jsxs)("div",{className:"top mb-2 mt-1 flex",children:[(0,a.jsx)("div",{className:"h-2 w-2 bg-red-500 rounded-full"}),(0,a.jsx)("div",{className:"ml-2 h-2 w-2 bg-orange-300 rounded-full"}),(0,a.jsx)("div",{className:"ml-2 h-2 w-2 bg-green-500 rounded-full"})]}),(0,a.jsx)("div",{className:"mt-1 w-full",children:(0,a.jsx)("div",{ref:l})})]})},l=e=>(0,a.jsx)(o.Z,{fallback:(0,a.jsx)("div",{children:"Hallo"}),children:()=>(0,a.jsx)(s,{...e})}),d={id:"getting-started",title:"Getting Started",sidebar_label:"Getting Started"},h="Getting Started",c={id:"developers/python/functional/getting-started",title:"Getting Started",description:"So you installed arkitekt and now you want to start using it. This guide will help you get started.",source:"@site/docs/developers/python/functional/usage.mdx",sourceDirName:"developers/python/functional",slug:"/developers/python/functional/getting-started",permalink:"/docs/developers/python/functional/getting-started",draft:!1,unlisted:!1,editUrl:"https://github.com/jhnnsrs/doks/edit/master/docs/developers/python/functional/usage.mdx",tags:[],version:"current",frontMatter:{id:"getting-started",title:"Getting Started",sidebar_label:"Getting Started"},sidebar:"tutorialSidebar",previous:{title:"Functional",permalink:"/docs/category/functional"},next:{title:"Intro",permalink:"/docs/developers/python/Intro"}},u={},p=[{value:"Lets check things are setup correctly",id:"lets-check-things-are-setup-correctly",level:2},{value:"Creating a new app",id:"creating-a-new-app",level:2},{value:"What just happened?",id:"what-just-happened",level:3},{value:"The .arkitekt folder",id:"the-arkitekt-folder",level:3},{value:"The app.py file",id:"the-apppy-file",level:3},{value:"Running Demo",id:"running-demo",level:2}];function m(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"getting-started",children:"Getting Started"}),"\n",(0,a.jsx)(t.p,{children:"So you installed arkitekt and now you want to start using it. This guide will help you get started.\nThis tutorial assumes you have a basic (really basic) understanding of the command line\nand have arkitekt installed on your computer."}),"\n",(0,a.jsx)(t.h2,{id:"lets-check-things-are-setup-correctly",children:"Lets check things are setup correctly"}),"\n",(0,a.jsx)(t.p,{children:"Before we start, lets make sure that arkitekt is installed correctly. To do this, we will\nrun the following command."}),"\n",(0,a.jsx)(l,{src:"/casts/init.cast"}),"\n",(0,a.jsx)("div",{className:"mt-2"}),"\n",(0,a.jsx)(t.p,{children:"If you dont see the following output, then you need to go back and install arkitekt. If you are still not greeted by\nthe CLI, try to install arkitekt in a new virtual environment (conda or venv) and try again."}),"\n",(0,a.jsx)(t.h2,{id:"creating-a-new-app",children:"Creating a new app"}),"\n",(0,a.jsx)(t.p,{children:"Now that things are setup correctly, lets create a new app. To do this, we will run the following command."}),"\n",(0,a.jsxs)(t.p,{children:["Create a new folder for your app, which we will call ",(0,a.jsx)(t.code,{children:"demo"})," and then navigate into it."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"mkdir demo\ncd demo\n"})}),"\n",(0,a.jsx)(t.p,{children:"Inside the folder, we will run the following command to create a new arkitekt app."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"arkitekt init\n"})}),"\n",(0,a.jsx)(t.p,{children:"This will launch the arkitekt CLI and ask you a few questions about your app. Don't worry, you can always change\nthese settings later. For now, lets just use what the CLI suggests."}),"\n",(0,a.jsx)(l,{src:"/casts/first.cast"}),"\n",(0,a.jsx)(t.h3,{id:"what-just-happened",children:"What just happened?"}),"\n",(0,a.jsxs)(t.p,{children:["Arkitekt jsut initialized a new app for you. If you inspect the folder you will see that a new file called ",(0,a.jsx)(t.code,{children:"app.py"}),"\nhas been created as well as a new folder called ",(0,a.jsx)(t.code,{children:".arkitekt"}),". Lets briefly go over what these files are and what they\nare used for."]}),"\n",(0,a.jsx)(t.h3,{id:"the-arkitekt-folder",children:"The .arkitekt folder"}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:".arkitekt"})," folder is a folder that contains information about your app. Most Importantly, it contains the\nmanifest for your app, which is a file that contains information about your app, such as its name, version, and entrypoint,\nbut also information about which rights your app needs to run, and how it should be built and deployed. This manifest is a\ncrucial part of your app, and you should not delete it. You can read more about the manifest in the manifest section."]}),"\n",(0,a.jsxs)(t.p,{children:["Lets look at the manifest that was created for us, if you chose the ",(0,a.jsx)(t.code,{children:"filter"})," template:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-yaml",children:"author: jhnnsrs\nentrypoint: app\nidentifier: demo\nrequirements: []\nscopes:\n  - read\nversion: 0.0.1\n"})}),"\n",(0,a.jsx)(t.p,{children:"This is a very simple manifest. It contains information about the author of the app, the entrypoint, the name of the app,\nSo far we have only very basic access rights (we can read data from the platform, but not write to it), but we will change\nthis later. Also note that we have not defined any requirements for our app. Requirements let us define hardware and software\nrequirements for our app, when it is being deployed as an PluginApp. We will also change this later."}),"\n",(0,a.jsx)(t.p,{children:'You will also note that the ".arktiekt" folder containts some additional files such as ".gitignore" and ".dockerignore".\nThese files are used to prevent git and docker from including cached secrests (such as accesstokens) in your git repository\nor docker image. You should not delete these files, as they are crucial for the security of your app.'}),"\n",(0,a.jsx)(t.admonition,{title:"I dont see the .arkitekt folder",type:"info",children:(0,a.jsxs)(t.p,{children:["By default, the ",(0,a.jsx)(t.code,{children:".arkitekt"}),' uses the "." prefix, to hide it from the file explorer on your computer. This is a common\npractice for folders that are used to store configuration files, such as the ',(0,a.jsx)(t.code,{children:".git"})," folder. If you are using a file\nexplorer that does not show hidden files, you might not see the ",(0,a.jsx)(t.code,{children:".arkitekt"})," folder. Dont' worry though, most IDEs will\nshow hidden files by default, and you can always use the terminal to navigate into the folder."]})}),"\n",(0,a.jsx)(t.h3,{id:"the-apppy-file",children:"The app.py file"}),"\n",(0,a.jsx)(t.p,{children:'The app.py file is the entrypoint for your app. When you run your app, this is the file that will be executed.\nArkitekt will import this file and register all of the functions that are defined (and decorated) with your arkitekt\ninstance, enabling them as nodes. You can imaging the app.py file as the "main" file of your app, for all things\n"arkitekt" related.'}),"\n",(0,a.jsxs)(t.p,{children:["Lets take a look at the app.py file that was created for us, if you chose the ",(0,a.jsx)(t.code,{children:"filter"})," template:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'from arkitekt import register\nfrom mikro.api.schema import RepresentationFragment, from_xarray\n\n\n@register\ndef max_intensity_projection(image: RepresentationFragment) -> RepresentationFragment:\n    """Z-Project the Maximum Intensity\n\n    This function projects the maximum intensity of the input image\n    along the z-axis\n\n    Parameters\n    ----------\n    image : RepresentationFragment\n        The input image\n\n    Returns\n    -------\n    RepresentationFragment\n        The projected image\n\n    """\n    image = image.data.max(dim="z")\n    return from_xarray(\n        image, name="Max Intensity Projection" + image.name, origins=[image]\n    )\n'})}),"\n",(0,a.jsxs)(t.p,{children:["This is the ",(0,a.jsx)(t.code,{children:"hello world"})," of arkitekt apps. A simple function that takes an image as input and returns a new image\nas output. Lets break it down."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:"from arkitekt import register\nfrom mikro.api.schema import RepresentationFragment, from_xarray\n"})}),"\n",(0,a.jsxs)(t.p,{children:["First we import the ",(0,a.jsx)(t.code,{children:"register"})," decorator from the arkitekt package. This is the decorator that we will use to register\nour functions with the arkitekt instance. We also import the ",(0,a.jsx)(t.code,{children:"RepresentationFragment"})," and ",(0,a.jsx)(t.code,{children:"from_xarray"})," functions from\nthe mikro package (which will help us interact with the Mikro service on the connected instance). Calling ",(0,a.jsx)(t.code,{children:"from_xarray"})," will create a new representation/image from any xarray or numpy object."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'@register\ndef max_intensity_projection(image: RepresentationFragment) -> RepresentationFragment:\n    """Z-Project the Maximum Intensity\n\n    This function projects the maximum intensity of the input image\n    along the z-axis\n\n    Parameters\n    ----------\n    image : RepresentationFragment\n        The input image\n\n    Returns\n    -------\n    RepresentationFragment\n        The projected image\n\n    """\n    ...\n'})}),"\n",(0,a.jsxs)(t.p,{children:["And this is our function. It takes a single argument, which is an image, and returns a new image. The function is decorated\nwith the ",(0,a.jsx)(t.code,{children:"@register"})," decorator, which will register the function with the arkitekt instance when the app is run. A lot of\nthe information that is needed to register the function is extracted from the function signature. For example, the name of\nthe function is extracted from the function name, the description is extracted from the docstring, and the input and output\ntypes are extracted from the function signature. The ",(0,a.jsx)(t.code,{children:"@register"})," decorator also takes a few optional arguments, which can\nbe used to customize the registration process. You can read more about the ",(0,a.jsx)(t.code,{children:"@register"})," decorator in the decorators section."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'image = image.data.max(dim="z")\nreturn from_xarray(\n    image, name="Max Intensity Projection" + image.name, origins=[image]\n)\n'})}),"\n",(0,a.jsxs)(t.p,{children:["And this is the body of our function. When calling our function, the arkitekt instance will pass in a ",(0,a.jsx)(t.code,{children:"RepresentationFragment"}),"\nobject, which contains the input data. We can access the data by calling ",(0,a.jsx)(t.code,{children:"image.data"}),". The data is stored as an xarray object,\nwhich we can use to perform our calculations. In this case, we are calculating the maximum intensity projection of the image\nalong the z-axis. We then create a new Image on the platform from the calculated data and return it, through the ",(0,a.jsx)(t.code,{children:"from_xarray"}),"\nfunction. (Note that we are also adding a prefix to the name of the image, to make it easier to distinguish between the input\nand output images)"]}),"\n",(0,a.jsx)(t.admonition,{title:"Why Representation Fragment?",type:"info",children:(0,a.jsxs)(t.p,{children:["If you are wondering why our image is called a ",(0,a.jsx)(t.code,{children:"RepresentationFragment"})," and not just an image, please read the ",(0,a.jsx)(t.a,{href:"https://mikro.dev",children:"mikro"}),"\nand graphql sections of the docs. But in short, a ",(0,a.jsx)(t.code,{children:"RepresentationFragment"}),' is a representation of an image that is stored\non a mikro instance. It contains information about the image, such as its name, description, and data. Besides the data,\nit also contains a "fragment" of metadata from all of the metadata that is associated with the image. The nomenclature is\na bit confusing, and we ',(0,a.jsx)(t.em,{children:"will definetly"})," change it in the future, but for now, just think of it as an image."]})}),"\n",(0,a.jsx)(t.admonition,{title:"A few things to note",type:"note",children:(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["The app.py file should ",(0,a.jsx)(t.strong,{children:"NOT"})," contain any code that is being executed when the file is imported. It should rather\ncontain a collection of function that are being registered with the arkitekt instance. If you have code that is being\nexecuted when the file is imported, it will be executed every time a user runs your app (or you run and change your\nfile in dev mode"]}),"\n",(0,a.jsx)(t.p,{children:"Ok:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'if __name__ == "__main__":\n   print("Hello World") # will only be executed when the file is run directly\n'})}),"\n",(0,a.jsx)(t.p,{children:"Not ok:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'print("Hello World") # will be executed every time the file is imported\n'})}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:["The app.py should ",(0,a.jsx)(t.strong,{children:"NOT"})," contain an app instance (e.g. when calling ",(0,a.jsx)(t.code,{children:'easy("app", "version")'}),"), as this will be\ncreated by the arkitekt CLI when you run your app."]}),"\n"]}),"\n"]})}),"\n",(0,a.jsx)(t.h2,{id:"running-demo",children:"Running Demo"}),"\n",(0,a.jsx)(t.p,{children:"Now that we have created our app, lets run it. Lets start by running it in dev mode. Follow on to the next section."})]})}function g(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}},11151:(e,t,n)=>{n.d(t,{Z:()=>s,a:()=>o});var a=n(67294);const i={},r=a.createContext(i);function o(e){const t=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(r.Provider,{value:t},e.children)}}}]);