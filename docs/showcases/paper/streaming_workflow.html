<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-showcases/paper/streaming_workflow" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Streaming Analysis | Arkitekt</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://arkitekt.live/img/favicon.svg"><meta data-rh="true" name="twitter:image" content="https://arkitekt.live/img/favicon.svg"><meta data-rh="true" property="og:url" content="https://arkitekt.live/docs/showcases/paper/streaming_workflow"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Streaming Analysis | Arkitekt"><meta data-rh="true" name="description" content="Biological systems can be highly reactive, and closely monitoring them during long-run acquisitions is necessary for ensuring a stable environment in an ongoing experiment. This can range from just checking that the acquisition is running properly (e.g., no loss of focus or some illumination problem), to monitoring the evolution of live biological samples (e.g., premature cell death). Classically, images are batch-processed once the acquisition is complete, i.e., when all of the data have been fully acquired and stored, leaving no chance for real-time analysis and feedback. In this second workflow, we illustrate how Arkitekt with its ability for streaming analysis (i.e., processing immediately after each acquisition event), enables to display real-time feedback on the running acquisition."><meta data-rh="true" property="og:description" content="Biological systems can be highly reactive, and closely monitoring them during long-run acquisitions is necessary for ensuring a stable environment in an ongoing experiment. This can range from just checking that the acquisition is running properly (e.g., no loss of focus or some illumination problem), to monitoring the evolution of live biological samples (e.g., premature cell death). Classically, images are batch-processed once the acquisition is complete, i.e., when all of the data have been fully acquired and stored, leaving no chance for real-time analysis and feedback. In this second workflow, we illustrate how Arkitekt with its ability for streaming analysis (i.e., processing immediately after each acquisition event), enables to display real-time feedback on the running acquisition."><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://arkitekt.live/docs/showcases/paper/streaming_workflow"><link data-rh="true" rel="alternate" href="https://arkitekt.live/docs/showcases/paper/streaming_workflow" hreflang="en"><link data-rh="true" rel="alternate" href="https://arkitekt.live/docs/showcases/paper/streaming_workflow" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://TSJ9BPZE3G-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Arkitekt RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Arkitekt Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Arkitekt" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.19f971d5.css">
<script src="/assets/js/runtime~main.7d2337e2.js" defer="defer"></script>
<script src="/assets/js/main.d7b77f13.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"> <!-- --> <!-- --> <!-- --> <!-- --> <div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.svg" alt="Doks Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/favicon.svg" alt="Doks Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">arkitekt</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documentation</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/explorer">Explorer</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/arkitektio" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><div style="margin-right:1rem"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div></div><div class="relative my-auto"><div class="my-auto" data-headlessui-state=""><div><button class="inline-flex border-0 cursor-pointer bg-primary-300 w-full justify-center rounded-md text-white px-4 py-2 my-auto shadow-primary-300/20 hover:bg-opacity-30 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75" type="button" aria-expanded="false" data-headlessui-state="">Connect</button></div></div><div style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div><div class="absolute translate-y-[20px] w-40 translate-x-[-75%] xl:block hidden z-1"><img src="/assets/ideal-img/connect.2a6cb8b.147.png" alt="connect"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Hi</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/introduction">Introduction</a><button aria-label="Expand sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/design">Design</a><button aria-label="Expand sidebar category &#x27;Design&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/apps">Apps</a><button aria-label="Expand sidebar category &#x27;Apps&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/troubleshooting">Troubleshooting</a><button aria-label="Expand sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/developers">For Developers</a><button aria-label="Expand sidebar category &#x27;For Developers&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/showcases">Showcases</a><button aria-label="Collapse sidebar category &#x27;Showcases&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/showcases/advanced">Advanced</a><button aria-label="Expand sidebar category &#x27;Advanced&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/showcases/paper">Paper</a><button aria-label="Collapse sidebar category &#x27;Paper&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/showcases/paper/interactive_workflow">Interactive Workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/showcases/paper/streaming_workflow">Streaming Analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/showcases/paper/smart_microscopy_workflow">Smart Microscopy</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/roadmap">Roadmap</a><button aria-label="Expand sidebar category &#x27;Roadmap&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/showcases"><span itemprop="name">Showcases</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/showcases/paper"><span itemprop="name">Paper</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Streaming Analysis</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Streaming Analysis</h1></header><p>Biological systems can be highly reactive, and closely monitoring them during long-run acquisitions is necessary for ensuring a stable environment in an ongoing experiment. This can range from just checking that the acquisition is running properly (e.g., no loss of focus or some illumination problem), to monitoring the evolution of live biological samples (e.g., premature cell death). Classically, images are batch-processed once the acquisition is complete, i.e., when all of the data have been fully acquired and stored, leaving no chance for real-time analysis and feedback. In this second workflow, we illustrate how Arkitekt with its ability for streaming analysis (i.e., processing immediately after each acquisition event), enables to display real-time feedback on the running acquisition.
Here we used Arkitekt to perform real-time quantitative monitoring of soSPIM 21,22 3D microscopy data using the popular StarDist 23 deep-learning segmentation algorithm, while they were being acquired (Fig. 3). A user-defined directory located on the microscope‚Äôs computer was monitored for new data, and all the analysis steps were performed remotely on each newly acquired data, in parallel with the acquisition, minimizing the risks of slowing the acquisition down or causing its crash.
As the deep learning-based segmentation steps can be highly time-consuming, several processes were run in parallel and distributed on 3 different available hardware. Visualization of both the 3D acquisition and the results were performed in Napari 7 on a remote and mobile computer, as well as through the web-interface, where results (here the number of nuclei and the average volume) were plotted on a live-dashboard, accessible to other remote members of the lab. (see Supp. Video 5)</p>
<div class="mt-2"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAADCAYAAACqPZ51AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhklEQVR4nAF7AIT/ACEyWbZRYIavnZG2r52SuL+ppLOe0rhrg1UjXodjSHCKPy1NjU8/Zn0AOUZv/2FokPOCcqn3gnSy/6GQo93hv2KZUzFr3GxCbcpaTWL/WExpsACAgHyNk6amTqzDzFquydBpz9fIQdnEdGCfuMRTqL/WOKCwqlG2r45tJOlBr4U3UQcAAAAASUVORK5CYII=&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="640" height="220"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/streaming.492e399.640.png" srcset="/assets/ideal-img/streaming.492e399.640.png 640w,/assets/ideal-img/streaming.f331c77.1320.png 1320w,/assets/ideal-img/streaming.623b188.2000.png 2000w" width="640" height="220"></noscript></div><div class="text-gray-400 mb-2"><small>The Streaming Microscopy Workflow</small></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">‚Äã</a></h2>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Please read</div><div class="admonitionContent_BuS1"><p>We <strong>strongly</strong> suggest to go through the <a href="/docs/introduction/first_steps">Getting Started</a> guide before attempting to run this workflow.
It will guide you through the installation of the Arkitekt platform and the setup of your first workflow, as well as how to install plugins
and apps. Additionally, we suggest to go through the <a href="/docs/advanced_tutorial/live">Live Analysis Basics</a> guide to get familiar with the Streaming
capabilities of Arkitekt.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hardware-requirements">Hardware Requirements<a href="#hardware-requirements" class="hash-link" aria-label="Direct link to Hardware Requirements" title="Direct link to Hardware Requirements">‚Äã</a></h3>
<p>This workflow is designed to run on a microscope computer running Windows 10 as well as on a remote analysis computer
that will power the Arkitekt platform and the image analysis (in the illustrated example running Ubuntu 22.04, but equally tested on
a Windows 10 Machine). To enable GPU acceleration for the Stardist segmentation, the analysis computer needs to have access to a CUDA 11 enabled GPU (tested on Nvidia GeforceRTX 2080Ti).
The microscope computer will need to be connected to the same network as the remote computer.</p>
<p>Additionally to use the parallel processing capabilities of this workflow, you will need to have similarly configured computers (Ubuntu 22.04 or Windows 10, with a CUDA 11 enabled GPU, with Docker installed)
that will be used to run the parallel processes. These computers will need to be connected to the same network as the remote computer.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="software-requirements">Software Requirements<a href="#software-requirements" class="hash-link" aria-label="Direct link to Software Requirements" title="Direct link to Software Requirements">‚Äã</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="microscope-software">Microscope Software<a href="#microscope-software" class="hash-link" aria-label="Direct link to Microscope Software" title="Direct link to Microscope Software">‚Äã</a></h4>
<p>Your microscope Software of choice (tested with <a href="https://www.moleculardevices.com/" target="_blank" rel="noopener noreferrer">Metamorph</a>, that is able to stream images to a directory on the microscope computer, in an
OME compliant format.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="gucker"><a href="https://github.com/jhnnsrs/gucker" target="_blank" rel="noopener noreferrer">Gucker</a><a href="#gucker" class="hash-link" aria-label="Direct link to gucker" title="Direct link to gucker">‚Äã</a></h4>
<p>This workflow uses the Gucker App to watch a directory for new files opn the Acquisition Computer. To install Gucker, download the latest release from the <a href="https://github.com/jhnnsrs/gucker/releases/latest" target="_blank" rel="noopener noreferrer">Gucker Releases</a>.
You can also choose to install Gucker from source by following the instructions on the <a href="https://github.com/jhnnsrs/gucker" target="_blank" rel="noopener noreferrer">Gucker Github</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mikro-napari-and-napari"><a href="https://github.com/jhnnsrs/mikro-napari" target="_blank" rel="noopener noreferrer">Mikro-Napari</a> and <a href="https://napari.org/" target="_blank" rel="noopener noreferrer">Napari</a><a href="#mikro-napari-and-napari" class="hash-link" aria-label="Direct link to mikro-napari-and-napari" title="Direct link to mikro-napari-and-napari">‚Äã</a></h4>
<p>For visualization of the 3D data, we use the Napari App. To install Napari, follow the instructions on the <a href="https://napari.org/" target="_blank" rel="noopener noreferrer">Napari Website</a>, as well as install
the mikro-napari plugin by following the instructions <a href="/docs/introduction/first_steps/first_app">here</a> or <a href="/docs/apps/mikro-napari">here</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="pluginapps">PluginApps<a href="#pluginapps" class="hash-link" aria-label="Direct link to PluginApps" title="Direct link to PluginApps">‚Äã</a></h4>
<p>This workflow uses the following <code>PluginApps</code> installed through the Arkitekt Plugin Store. To install these plugins follow the instructions <a href="/docs/introduction/first_steps/first_tool">here</a>,
or connect this website to your Arkitekt instance and click on the button below:</p>
<div class="flex flex-row gap-2"><div class="my-2 p-2 rounded-md text-black text-center w-60 bg-back-600"> üé± Connect to install</div><div class="my-2 p-2 rounded-md text-black text-center w-60 bg-back-600"> üé± Connect to install</div><div class="my-2 p-2 rounded-md text-black text-center w-60 bg-back-600"> üé± Connect to install</div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="optional-parallization"><em>[Optional]: Parallization</em><a href="#optional-parallization" class="hash-link" aria-label="Direct link to optional-parallization" title="Direct link to optional-parallization">‚Äã</a></h4>
<p>To enable the parallelization of the Stardist segmentation, you will need to have access to a Docker enabled computer (Ubuntu 22.04 or Windows 10) with a CUDA 11 enabled GPU.
Arkitekt does not need to be installed on this computer, but we will run the Segmentor Plugin on this computer through a <code>docker run</code> command.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="preparations">Preparations<a href="#preparations" class="hash-link" aria-label="Direct link to Preparations" title="Direct link to Preparations">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="analysis-computer">Analysis Computer<a href="#analysis-computer" class="hash-link" aria-label="Direct link to Analysis Computer" title="Direct link to Analysis Computer">‚Äã</a></h3>
<ol>
<li>
<p>Install Arkitekt on your analysis computer following the instructions <a href="/docs/introduction/installation">here</a>.</p>
</li>
<li>
<p>Depending if you want to reproduce the results illustrated in the Paper, you can either install the Stardist Model which we used for the demo data, via the button below or train your own model by following the instructions <a href="/docs/advanced_tutorial/training">here</a>.</p>
</li>
</ol>
<div class="my-2 p-2 rounded-md text-black text-center w-60 bg-back-600"> üé± Connect to install</div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="acquisition-computer">Acquisition Computer<a href="#acquisition-computer" class="hash-link" aria-label="Direct link to Acquisition Computer" title="Direct link to Acquisition Computer">‚Äã</a></h3>
<p>TODO: Video</p>
<ol>
<li>
<p>On the Acquisition Computer, you will need to setup your microscope software to save the images in an OME compliant format to a directory that is accessible to the analysis computer.
For this example, we will assume that the images are saved to the directory <code>C://Data</code> on the microscope computer, any other directory can be used, but will need to be specified correctly in the Gucker App.</p>
</li>
<li>
<p>Unzip the Gucker App, and execute on <code>Gucker.exe</code>. Initial startup might take a few seconds, as Gucker will need to precompile some code. Once the App is running, select your respective directory
in the &quot;Choose Directory&quot; field. Additionally as Gucker also acts as a Data Exporter, you need to specify an &quot;Export Directory&quot;. This should not be the same as the &quot;Import Directory&quot;, but can be any other directory
on your computer with write access.</p>
</li>
<li>
<p>Connect and Login with the Arkitekt instance (if your Arkitekt instance does not show up, make sure you are <a href="/docs/introduction/installation#advertisting">advertising</a> it)</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional-parallel-processing-computers">Optional: Parallel Processing Computers<a href="#optional-parallel-processing-computers" class="hash-link" aria-label="Direct link to Optional: Parallel Processing Computers" title="Direct link to Optional: Parallel Processing Computers">‚Äã</a></h3>
<ol>
<li>To enable the parallel processing of the Stardist segmentation, we will manually start the Segmentor plugin on each of the parallel processing computers. This can be done by executing the following command in a terminal on each of the parallel processing computers:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker run -t --gpus all jhnnsrs/segmentor:0.3.4 arkitekt run prod -h --url $ANALYSIS_COMPUTER_HOSTNAME:8000 -i $THIS_INSTANCE_ID</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>where <code>$ANALYSIS_COMPUTER_HOSTNAME</code> is the hostname of your analysis computer, and <code>$THIS_INSTANCE_ID</code> is the ID of the parallel processing computer. This ID can be any string, but needs to be unique for each parallel processing computer.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installing-the-workflows">Installing the Workflows<a href="#installing-the-workflows" class="hash-link" aria-label="Direct link to Installing the Workflows" title="Direct link to Installing the Workflows">‚Äã</a></h2>
<p>The streaming analysis workflow can be installed by clicking on the button below. One installed all correspoinding
nodes should light up in the Arkitekt Workflow Editor.</p>
<div class="border border-1 rounded border-gray-800"><div class="flex w-full h-[400px] flex-col overflow-hidden relative"><div style="width:100%;height:100%;overflow:hidden;position:relative;z-index:0" class="react-flow" data-testid="rf__wrapper"><div class="react-flow__renderer" style="position:absolute;width:100%;height:100%;top:0;left:0"><div class="react-flow__pane" style="position:absolute;width:100%;height:100%;top:0;left:0"><div class="react-flow__viewport react-flow__container" style="transform:translate(0px,0px) scale(1)"><div class="react-flow__edgelabel-renderer"></div><div class="react-flow__nodes" style="position:absolute;width:100%;height:100%;top:0;left:0"></div></div></div></div><div class="react-flow__panel react-flow__attribution bottom right" style="pointer-events:all" data-message="Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev"><a href="https://reactflow.dev" target="_blank" rel="noopener noreferrer" aria-label="React Flow attribution">React Flow</a></div><div id="react-flow__node-desc-1" style="display:none">Press enter or space to select a node.<!-- -->You can then use the arrow keys to move the node around.<!-- --> Press delete to remove it and escape to cancel.<!-- --> </div><div id="react-flow__edge-desc-1" style="display:none">Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.</div><div id="react-flow__aria-live-1" aria-live="assertive" aria-atomic="true" style="position:absolute;width:1px;height:1px;margin:-1px;border:0;padding:0;overflow:hidden;clip:rect(0px, 0px, 0px, 0px);clip-path:inset(100%)"></div></div></div><div class="relative flex w-full p-3 border-t-2 border-gray-800">Not yet with Fluss<!-- --> </div></div>
<br>
<p>You can also follow the following steps to install the workflow manually:</p>
<video autoplay="" muted="" loop="" controls="" class="rounded rounded-md my-3" width="100%"><source src="/assets/medias/organoid_workflow_creation-d688056645cf56515848cec30d3cc59b.webm"></video>
<p>A few notes on this workflow:</p>
<ol>
<li>
<p>On the dashboard we can see that three seperate instances of the segmentor app are currently active and
connected. These are the three parallel processing computers that we started in the previous step. If you do not see
any instances, make sure that you have started the Segmentor App on each of the parallel processing computers. Of course
you can also skip this part and just run the workflow on your analysis computer, but then the Stardist segmentation will
be run sequentially and not in parallel.</p>
</li>
<li>
<p>Creating the Workflow follows the same patterns as illustrated in the Tutorials.</p>
</li>
<li>
<p>Connect the nodes by dragging the output ports of one node to the input ports of another node. As illustrated in the <a href="/docs/introduction/advanced_tutorial/live">Live Analysis</a>, the
<code>Convert Omero</code> node is returning a list of Images (as some OME formats can contain multiple series), which is why we need to <code>Chunk</code> the list of images into single images, before we can
run the rest of the workflow on each image individually.</p>
</li>
<li>
<p>You see that some parameters of the workflow are set to specific parameters right in the workflow. This are inherently linked to the workflow as you can then just copy the workflow to another
Arkitekt instance and it will work out of the box. Some parameters like the <code>Segmentation Model</code> of the <code>Predict Stardist</code> node are set to be &quot;global parameters&quot; (by clicking the ‚¨ÜÔ∏è next to parameter,
turning it bright red). This means that they will asked as constants when the workflow is run. This is useful if you want to run the same workflow with different parameters (e.g. different segmentatoin
models), without having to change the workflow itself.</p>
</li>
<li>
<p>During the creation of the workflow around (2:25) we see the <code>Predict Stardist</code> node being configured. Here we can see that the <code>Segmentation Model</code> parameter is set to be a global parameter, and that
we are changing the &quot;Reserve Params&quot; to manually point to all three segmentor instances that we started in the previous step. This will send out incoming requests in a round robin manner to the three
segmentor instances, and will thus distribute the workload evenly between the three instances. <em>However</em> in the default configuratoin this will not parallelize the segmentation but rather wait for
the first instance to finish, before sending the next image to the next instance. To enable parallelization, we can go to the &quot;Advanced&quot; tab and set the Map Strategy to &quot;As completed&quot;. This will cause
Arkitekt to <em>NOT</em> wait for the first instance to finish, but send immediately the next image to the next instance. This will cause the three instances to run in parallel, and thus speed up the segmentation
n, however this may also cause the images to be segmented in a different order than they were acquired. If you want to make sure that the images are segmented in the same order as they were acquired, you
can set the Map Strategy to &quot;Ordered&quot;, however this is not the most efficient way to parallelize the segmentation, as potential longer running segmentations will block the pipeline.</p>
</li>
</ol>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>On Parallization in Arkitekt</div><div class="admonitionContent_BuS1"><p>As you can see Arkitekt supports various parellization patterns, each coming with their own advantages and disadvantages. For more information on the different parellization patterns, please refer to the <a href="/docs/advanced_tutorial/parallelization">Advanced Tutorial</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deployment">Deployment<a href="#deployment" class="hash-link" aria-label="Direct link to Deployment" title="Direct link to Deployment">‚Äã</a></h2>
<p>To deploy the workflow, click on the &quot;Deploy&quot; button in the Arkitekt Workflow Editor. This will deploy the workflow to your Arkitekt instance. If you want to enable
the parellization feature and have imported the workflow, please make sure that you have selected all of the participating computers in the &quot;Predict StarDist&quot; node,
before deploying the workflow.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="context-preparation">Context Preparation<a href="#context-preparation" class="hash-link" aria-label="Direct link to Context Preparation" title="Direct link to Context Preparation">‚Äã</a></h2>
<p>During the creationg of our workflow, we set the Stage parameters of our <code>Convert Omero</code> node as a global parameter to our workflow. A few words about what that entails:</p>
<p>A &quot;Stage&quot; is a metadata container provided by Arkitekt, specifically through its Mikro service.
Its primary purpose is to put acquired data into a relevant biological context.</p>
<p>For instance, in our example, when we capture multiple positions using our microscope, each position is saved as a separate file which passes as a single item through our workflow.
This raises a question: How can we inform Arkitekt that all these files are part of the same multi-position acquisition?</p>
<p>Well that&#x27;s where the &quot;Stage&quot; comes in. In Arkitekt, a &quot;Stage&quot; is essentially a metadata label that groups positions, helping to recreate, for example, the spatial arrangement of our samples on the microscope.
And since our files adhere to the OME standard, they contain position information in the OME metadata. By grouping our files by position, we can recreate the spatial arrangement of our samples on the microscope.
automatically, and on the fly, and we can explore our data in a spatial context, directly from the webinterface. This is also why we gave the &quot;Convert Omero&quot; node a <code>Position Tolerance</code> parameter set to 40¬µm so that
all motion-correcteed images that share the same position within 40¬µm will be grouped into the same position on the same stage.</p>
<p>For this to work, we need to create a new <code>Stage</code> on the Arkitekt webinterface by going to the <code>Data</code> section and clicking on <code>Create New Stage</code>. Here we can give our stage a name, which could be
the name of multi-well experiment. This now empty stage can be passed as a parameter to our workflow and bthe <code>Convert Omero</code> node will use our stage to group all of passed throug images into
the same stage. This will allow us to explore our data in a spatial context, directly from the webinterface.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>On Stages</div><div class="admonitionContent_BuS1"><p>If you are re-running the workflow on the multi-well sample you won&#x27;t need to change the <code>Stage</code>, as the phyiscal position of the samples will not change. However if you are running the workflow on a different
sample, or you have moved the sample on the microscope, you will need to create a new <code>Stage</code> for the new sample. You can do this by going to the <code>Data</code> section and clicking on <code>Create New Stage</code>.
You can also use the <code>Create New Stage</code> node to create a new stage directly from within the workflow.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reserving-and-running-the-workflow">Reserving and Running the Workflow<a href="#reserving-and-running-the-workflow" class="hash-link" aria-label="Direct link to Reserving and Running the Workflow" title="Direct link to Reserving and Running the Workflow">‚Äã</a></h2>
<p>Reserve the deployed workflow either on the Arkitekt Workflow interface or on the Dashboard and once all of the Applications are started, Arkitekt should guide you
on which applications need to be started. Once all of the applications are started, you can start the workflow, through right-click start on the Workflow. During the
assignment Arkitekt will ask you for the global Parameters that we set in the workflow.</p>
<ol>
<li>
<p>Model: Please choose here the model that we installed in the &quot;Preparations&quot; step. If you have trained your own model, you can also choose that model here.</p>
</li>
<li>
<p>RegExp: This is a regular expression that will be used to filter the files that are found in the &quot;Import Directory&quot;. In our case we want to only segment the images
that are saved in the TIF format, so we used the regular expression <code>*.TIF</code> to only select these files. If you want to segment other files, you can change
this regular expression to match your files.</p>
</li>
<li>
<p>Stage: Just select the stage that you created in the &quot;Context Preparation&quot; step.</p>
</li>
</ol>
<p>After assigned you should be shown the Workflow Run interface which will show you the progress of the workflow.
It will automatically update as new images are put into the directory on the microscope computer. You can now
start the acquisition on the microscope computer and the workflow will automatically start processing the images.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="results">Results<a href="#results" class="hash-link" aria-label="Direct link to Results" title="Direct link to Results">‚Äã</a></h2>
<p>In addition to the Run Interface which should give you live feedback on the progress of the workflow, you can also use the stage view to explore the results of the workflow.
Here Positions are shown as they were acquired on the microscope, and you can click on each position to see the results of the segmentation ( if it was already processed)</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Test Environment</summary><div><div class="collapsibleContent_i85q"><div><p>This workflow was tested on the following environments:</p><br><p>Acquisition Computer:</p><ul>
<li>Intel Xeon CPU E5-2620 v4 @ 2.10GHz</li>
<li>128GB RAM</li>
<li>Nikon Ti2-E Microscope</li>
<li>Windows 10</li>
<li>Micro-Manager 2.0.1 2023.05.23</li>
<li>MikroManager 0.0.1</li>
</ul><p>Analysis Computer</p><ul>
<li>Intel(R) Core(TM) i9-10900KF CPU @ 3.70GHz</li>
<li>Ubuntu 22.04</li>
<li>Arkitekt Paper Channel</li>
<li>Segmentor Plugin 0.3.4</li>
<li>Stdlib Plugin 0.3.9</li>
</ul></div></div></div></details></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/arkitektio/arkitektio.github.io/edit/master/docs/showcases/paper/streaming_workflow.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/showcases/paper/interactive_workflow"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Interactive Workflow</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/showcases/paper/smart_microscopy_workflow"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Smart Microscopy</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a><ul><li><a href="#hardware-requirements" class="table-of-contents__link toc-highlight">Hardware Requirements</a></li><li><a href="#software-requirements" class="table-of-contents__link toc-highlight">Software Requirements</a></li></ul></li><li><a href="#preparations" class="table-of-contents__link toc-highlight">Preparations</a><ul><li><a href="#analysis-computer" class="table-of-contents__link toc-highlight">Analysis Computer</a></li><li><a href="#acquisition-computer" class="table-of-contents__link toc-highlight">Acquisition Computer</a></li><li><a href="#optional-parallel-processing-computers" class="table-of-contents__link toc-highlight">Optional: Parallel Processing Computers</a></li></ul></li><li><a href="#installing-the-workflows" class="table-of-contents__link toc-highlight">Installing the Workflows</a></li><li><a href="#deployment" class="table-of-contents__link toc-highlight">Deployment</a></li><li><a href="#context-preparation" class="table-of-contents__link toc-highlight">Context Preparation</a></li><li><a href="#reserving-and-running-the-workflow" class="table-of-contents__link toc-highlight">Reserving and Running the Workflow</a></li><li><a href="#results" class="table-of-contents__link toc-highlight">Results</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://forum.image.sc/tag/arkitekt" target="_blank" rel="noopener noreferrer" class="footer__link-item">Image.sc<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/arkitektio/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2024 Arkitekt, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>